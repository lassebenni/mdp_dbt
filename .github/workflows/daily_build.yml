name: "Pull Request"
on:
  schedule:
    - cron: "16 7 * * *" # every day at 7:16 am

jobs:
  dbt:
    name: "Run dbt"
    runs-on: ubuntu-latest
    permissions: write-all

    steps:
      - name: "Checkout"
        uses: actions/checkout@master
      - id: "auth"
        uses: "google-github-actions/auth@v0"
        with:
          workload_identity_provider: "projects/303639907957/locations/global/workloadIdentityPools/identity-pool/providers/github"
          service_account: "bigquery@analytics-engineers.iam.gserviceaccount.com"
      - name: dbt-action
        id: dbt-build
        uses: mwhitaker/dbt-action@master
        with:
          dbt_command: "dbt build --profiles-dir ."

